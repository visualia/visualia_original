# Visualia

Visualia is a web framework for creating interactive documents. It uses [Markdown](https://guides.github.com/features/mastering-markdown/) text format and [Vue 3](https://github.com/vuejs/vue-next) templates for content creation.

Visualia supports a wide range of use cases, from interactive learning materials and live notebooks to generative design and data visualization.

https://github.com/visualia/visualia

![](https://github.com/visualia/visualia/workflows/Test/badge.svg)

## Getting started

To get started you will need three files: `index.md` for Markdown, `index.js` for Javascript and `index.html` for HTML.

**index.md**

```live index
# Hello

Welcome to Visualia. Edit me!
```

**index.js.** Yes, two lines.

```js
import { visualia } from "https://visualia.github.io/visualia/dist/visualia.js";
visualia();
```

**index.html**

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Visualia</title>
    <link
      rel="stylesheet"
      href="https://visualia.github.io/visualia/dist/visualia.css"
    />
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="index.js"></script>
  </body>
</html>
```

## Development

### Development environment

We recommend to use Visual Studio Code with [vscode-live-server](https://github.com/ritwickdey/vscode-live-server) plugin

### Component authoring

#### Templates

Visualia uses ES6 string literals (not `.vue` files) for templating to make the framework work in the browser without bundling.

```js
export default { template: `<div>Hello world</div>` };
```

It's recomended to install [vscode-vue-inline-template](https://github.com/faisalhakim47/vscode-vue-inline-template) plugin to VS Code to highlight the `template:` section in the Vue component.

#### CSS and styling

Global CSS resides in `/dist/visualia.css` file and relies heavily on CSS variables.

Component CSS can be stored as a `css` property on each component. On framework initialization all components CSS will be merged into a single CSS string and injected into HTML `<style>` tag.

```js
const VExample = {
  template: `<div class="VExample">Hello world</div>`,
  css: /* css */ `
    .VExample {
      color: red;
    }
  `,
};
```

To highlight the CSS in components, it's recommended to install [es6-string-css](https://github.com/bashmish/es6-string-css) plugin.

### Code organization

#### Github configuration

[/.github](/.githb)

GitHub actions for testing and deployment

#### Distribution files

[/dist](/dist)

Framework distribution files, generated by build scripts.

At the time of writing, these are committed into the project's GitHub repository, we are looking for NPM publishing in the future.

[/dist/deps](/dist/deps)

External dependencies as bundled ES6 bundled modules, generated by the build script. These bundled dependencies used both in development and production.

[/dist/visualia.css](/dist/visualia.css)

The main CSS file, this is _the_ file to import into your custom Visualia application.

[/dist/visualia.js](/dist/visualia.js)

The main library entrypoint as ES6 module, this is _the_ file to import into your custom Visualia application.

#### Documentation

[/docs](/dist/deps)

Documentation as Visualia-flavoured Markdown files. Project homepage fetches and renders these pages in the browser, without build step.

#### Experiments

[/editor](/editor)

Experimental live editor based on Monaco editor (that also powers VS Code).

[/experiments](/experiments)

Various coding experiments.

#### Source code

[/src](/src)

Project source code

[/src/components](/src/components)

Project public components, available in the Markdown templates.

[/src/components.js](/src/components)

Index file for public components.

[/src/deps](/deps)

External dependencies, imported as CommonJS modules. This directory is needed `npm run build:deps` build script that packages dependencies to `/dist/deps` as ES6 modules.

[/src/internals](/src/internals)

Internal components and utility functions.

[/src/internals.js](/src/internals.js)

Index file for internal components and utility functions.

[/src/utils](/src/utils)

Public utility functions that are available in the Markdown templates.

[/src/utils.js](/src/utils.js)

Index file for public utility functions.

#### Other files

[/index.html](/index.html) and [/index.js](/index.js)

Visualia homepage. It imports `./dist/visualia.js` and fetches and renders documentation in `/docs` and `/README.md`

[/rollup.deps.config.js](/rollup.deps.config.js)

Rollup config for building external dependencies. It used in `npm run build:deps` build script.

[/rollup.lib.config.js](/rollup.lib.config.js)

Rollup config for building a bundled version of the framework. It used in `npm run build:lib` build script.

### Testing

Visualia relies on a suite of unit tests what verify framework's utility and internal functions work right.

#### Writing tests

Tests are simple functions starting with `test_` prefix that return `actual` and `expected` results of the function.

```js
export const add = value => value + 1

export const test_add = {
  // return [actual, expected];
  return [add(1), 2]
}
```

Test functions are invoked by test runner `/test.js` that compares the `actual` and `expected` results. If they equal, the test passes, otherwise the test fails.

#### Run browser tests

Open [/test.html](/test.html) file in local server and open Developer Tools panel.

#### Run command line tests

It is assumed you have NodeJS installed. The run

```js
node test.js
```

#### Run CI tests

Command-line tests run on each commit to Github repository, there is a Github action in [/.github/actions](./.github/actions).
